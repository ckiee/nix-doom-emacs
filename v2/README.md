
## doing the nya nya dance where you use nixstraight outside the build
- prefix `echo` on the packageJSON build in libstraight.nix
- nix-shell -p emacs (needs to match version or it anger)
- run it
emacs -q --batch --directory=/nix/store/3jc56jhxy4i4gra0hvv9i710gn1hsnzv-emacs-straight.el/share/emacs/site-lisp --load=straight/setup.el --load=advice.el --eval='(nix-straight-get-used-packages "/nix/store/xikajg0v75wq88h5bp3qkkck47dwz2xa-doom-src/bin/doom" "meow.json")' -- install --no-hooks --no-fonts --no-env
- nya. meow

## install log

```
ckie@cookiemonster ~/git/nix-doom-emacs/v2 -> ./emacs/bin/doom install
Installing Doom Emacs!

✓ Created ~/git/nix-doom-emacs/v2/doomd/
  - Creating ~/git/nix-doom-emacs/v2/doomd/init.el
  ✓ Done!
  - Creating ~/git/nix-doom-emacs/v2/doomd/config.el
  ✓ Done!
  - Creating ~/git/nix-doom-emacs/v2/doomd/packages.el
  ✓ Done!
Generate an envvar file? (see `doom help env` for details) (y or n) n
Installing plugins
> Installing straight...
> Installing packages...
  > Updating recipe repos...
  > Cloning use-package... emacsmirror-mirror...
  - Checked out use-package: 77945e002f11440eae72d8730d3de218163d551e
  > Building use-package...
  > Building use-package > Building bind-key...
  > Building use-package...
  > Cloning auto-minor-mode...
  - Checked out auto-minor-mode: 17cfa1b54800fdef2975c0c0531dad34846a5065
  > Building auto-minor-mode...
  > Cloning gcmh...
  - Checked out gcmh: 0089f9c3a6d4e9a310d0791cf6fa8f35642ecfd9
  > Building gcmh...
  > Cloning explain-pause-mode...
  - Checked out explain-pause-mode: 2356c8c3639cbeeb9751744dbe737267849b4b51
  > Building explain-pause-mode...
  > Building straight...
  > Cloning all-the-icons.el...
  > Building all-the-icons...
  > Cloning emacs-hide-mode-line...
  > Building hide-mode-line...
  > Cloning highlight-numbers...
  - Checked out highlight-numbers: 8b4744c7f46c72b1d3d599d4fb75ef8183dee307
  > Building highlight-numbers...
  > Building highlight-numbers > Cloning parent-mode...
  > Building highlight-numbers > Building parent-mode...
  > Building highlight-numbers...
  > Cloning rainbow-delimiters...
  - Checked out rainbow-delimiters: a32b39bdfe6c61c322c37226d66e1b6d4f107ed0
  > Building rainbow-delimiters...
  > Cloning restart-emacs...
  - Checked out restart-emacs: 1607da2bc657fe05ae01f7fdf26f716eafead02c
  > Building restart-emacs...
  > Cloning better-jumper...
  - Checked out better-jumper: 47622213783ece37d5337dc28d33b530540fc319
  > Building better-jumper...
  > Cloning dtrt-indent...
  - Checked out dtrt-indent: d4fd1b4977eb0d534844fddf01c3c51c70c57205
  > Building dtrt-indent...
  > Cloning helpful...
  - Checked out helpful: 94c25337b2de2f9da60914a7c0c6cca9584c0231
  > Building helpful...
  > Building helpful > Cloning dash.el...
  > Building helpful > Building dash...
  > Building helpful > Cloning s.el...
  > Building helpful > Building s...
  > Building helpful > Cloning f.el...
  > Building helpful > Building f...
  > Building helpful > Cloning elisp-refs...
  > Building helpful > Building elisp-refs...
  > Building helpful...
  > Cloning pcre2el...
  - Checked out pcre2el: 38c6f80c787da547287db96b495e5b695ca0b4b8
  > Building pcre2el...
  > Cloning smartparens...
  - Checked out smartparens: 7afd647395018a26633673ed92ce7a9cb3ccb8f2
  > Building smartparens...
  > Cloning ws-butler...
  - Checked out ws-butler: 572a10c11b6cb88293de48acbb59a059d36f9ba5
  > Building ws-butler...
  > Cloning projectile...
  - Checked out projectile: e18ad4d6111eb9e975ccce028baf5e4bb786bfcf
  > Building projectile...
  > Cloning project...
  - Checked out project: e086bdc7c515f8bfc22598d473ba888ba7683f0c
  > Building project...
  > Building project > Cloning xref...
  > Building project > Building xref...
  > Building project...
  > Cloning general.el...
  > Building general...
  > Cloning emacs-which-key...
  > Building which-key...
  > Cloning compat...
  - Checked out compat: be1d94d5e0e2fc9f02d2cd240d255c3a43037ba3
  > Building compat...
  > Cloning company-mode (for company)...
  > Building company...
  > Cloning emacs-company-dict...
  > Building company-dict...
  > Cloning vertico...
  - Checked out vertico: 926234ab3fbe2b89e8c7ddfccecff518d73ac6ba
  > Building vertico...
  > Cloning orderless...
  - Checked out orderless: e6784026717a8a6a7dcd0bf31fd3414f148c542e
  > Building orderless...
  > Cloning consult...
  - Checked out consult: 511d8c0b072a660009fcba1f461dba9e21bc0cf0
  > Building consult...
  > Cloning consult-dir...
  - Checked out consult-dir: ed8f0874d26f10f5c5b181ab9f2cf4107df8a0eb
  > Building consult-dir...
  > Cloning consult-flycheck...
  - Checked out consult-flycheck: fda630411ad9219f45136310f671b44eaefafcab
  > Building consult-flycheck...
  > Building consult-flycheck > Cloning flycheck...
  - Checked out flycheck: 784f184cdd9f9cb4e3dbb997c09d93e954142842
  > Building consult-flycheck > Building flycheck...
  > Building consult-flycheck > Building flycheck > Cloning pkg-info...
  > Building consult-flycheck > Building flycheck > Building pkg-info...
  > Building consult-flycheck > Building flycheck > Building pkg-info > Cloning epl...
  > Building consult-flycheck > Building flycheck > Building pkg-info > Building epl...
  > Building consult-flycheck > Building flycheck > Building pkg-info...
  > Building consult-flycheck > Building flycheck...
  > Building consult-flycheck...
  > Cloning embark...
  - Checked out embark: 9b17d9a63b6960e026ad3c09a7871e0a3364e926
  > Building embark...
  > Building embark-consult...
  > Cloning marginalia...
  - Checked out marginalia: b900ec5457068cd2b15b0e3600437f147c6bf636
  > Building marginalia...
  > Cloning Emacs-wgrep (for wgrep)...
  > Building wgrep...
  > Cloning themes (for doom-themes)...
  > Building doom-themes...
  > Cloning emacs-solaire-mode...
  > Building solaire-mode...
  > Cloning hl-todo...
  - Checked out hl-todo: a627d33214e60fc5a2fe6164411d908e1afdba59
  > Building hl-todo...
  > Cloning doom-modeline...
  - Checked out doom-modeline: 6125309c2caa3c98591a4c802e9b4dd2f7ea83e9
  > Building doom-modeline...
  > Building doom-modeline > Cloning shrink-path.el...
  > Building doom-modeline > Building shrink-path...
  > Building doom-modeline...
  > Cloning anzu...
  - Checked out anzu: 5abb37455ea44fa401d5f4c1bdc58adb2448db67
  > Building anzu...
  > Cloning evil-anzu...
  - Checked out evil-anzu: d1e98ee6976437164627542909a25c6946497899
  > Building evil-anzu...
  > Building evil-anzu > Cloning evil...
  - Checked out evil: 2ce03d412c4e93b0b89eb43d796c991806415b8a
  > Building evil-anzu > Building evil...
  > Building evil-anzu > Building evil > Cloning goto-chg...
  > Building evil-anzu > Building evil > Building goto-chg...
  > Building evil-anzu > Building evil...
  > Building evil-anzu...
  > Cloning evil-goggles...
  - Checked out evil-goggles: 8f20a16e74016f37ad76dc4f2230d9b00c6df3c2
  > Building evil-goggles...
  > Cloning git-gutter-fringe...
  - Checked out git-gutter-fringe: 648cb5b57faec55711803cdc9434e55a733c3eba
  > Building git-gutter-fringe...
  > Building git-gutter-fringe > Cloning git-gutter...
  > Building git-gutter-fringe > Building git-gutter...
  > Building git-gutter-fringe > Cloning fringe-helper.el...
  > Building git-gutter-fringe > Building fringe-helper...
  > Building git-gutter-fringe...
  > Cloning vi-tilde-fringe...
  - Checked out vi-tilde-fringe: f1597a8d54535bb1d84b442577b2024e6f910308
  > Building vi-tilde-fringe...
  > Cloning persp-mode.el...
  > Building persp-mode...
  > Cloning evil-args...
  - Checked out evil-args: 2671071a4a57eaee7cc8c27b9e4b6fc60fd2ccd3
  > Building evil-args...
  > Cloning evil-easymotion...
  - Checked out evil-easymotion: f96c2ed38ddc07908db7c3c11bcd6285a3e8c2e9
  > Building evil-easymotion...
  > Building evil-easymotion > Cloning avy...
  - Checked out avy: 955c8dedd68c74f3cf692c1249513f048518c4c9
  > Building evil-easymotion > Building avy...
  > Building evil-easymotion...
  > Cloning evil-embrace.el...
  > Building evil-embrace...
  > Building evil-embrace > Cloning embrace.el...
  > Building evil-embrace > Building embrace...
  > Building evil-embrace > Building embrace > Cloning expand-region.el...
  > Building evil-embrace > Building embrace > Building expand-region...
  > Building evil-embrace > Building embrace...
  > Building evil-embrace > Cloning evil-surround...
  - Checked out evil-surround: f273821f575ace519066fb106ee45a5b8577475f
  > Building evil-embrace > Building evil-surround...
  > Building evil-embrace...
  > Cloning evil-escape...
  - Checked out evil-escape: 819f1ee1cf3f69a1ae920e6004f2c0baeebbe077
  > Building evil-escape...
  > Cloning evil-exchange...
  - Checked out evil-exchange: 5f0a2d41434c17c6fb02e4f744043775de1c63a2
  > Building evil-exchange...
  > Cloning evil-indent-plus...
  - Checked out evil-indent-plus: b4dacbfdb57f474f798bfbf5026d434d549eb65c
  > Building evil-indent-plus...
  > Cloning evil-lion...
  - Checked out evil-lion: a55eb647422342f6b1cf867f797b060b3645d9d8
  > Building evil-lion...
  > Cloning evil-nerd-commenter...
  - Checked out evil-nerd-commenter: 8c0f23d46a3927b9f83c1c2c4590be53d0b740db
  > Building evil-nerd-commenter...
  > Cloning evil-numbers...
  - Checked out evil-numbers: 7a1b62afc12da2b582bf84d722e7b10ca8b97065
  > Building evil-numbers...
  > Cloning evil-snipe...
  - Checked out evil-snipe: c07788c35cf8cd8e652a494322fdc0643e30a89f
  > Building evil-snipe...
  > Cloning evil-textobj-anyblock...
  - Checked out evil-textobj-anyblock: 29280cd71a05429364cdceef2ff595ae8afade4d
  > Building evil-textobj-anyblock...
  > Cloning evil-traces...
  - Checked out evil-traces: 290b5323542c46af364ec485c8ec9000040acf90
  > Building evil-traces...
  > Cloning evil-visualstar...
  - Checked out evil-visualstar: 06c053d8f7381f91c53311b1234872ca96ced752
  > Building evil-visualstar...
  > Cloning exato...
  - Checked out exato: aee7af7b7a0e7551478f453d1de7d5b9cb2e06c4
  > Building exato...
  > Cloning evil-quick-diff...
  - Checked out evil-quick-diff: 69c883720b30a892c63bc89f49d4f0e8b8028908
  > Building evil-quick-diff...
  > Cloning evil-collection...
  - Checked out evil-collection: aaf3e0038e9255659fe0455729239c08498c4c0b
  > Building evil-collection...
  > Building evil-collection > Cloning annalist.el...
  > Building evil-collection > Building annalist...
  > Building evil-collection...
  > Cloning yasnippet...
  - Checked out yasnippet: 5cbdbf0d2015540c59ed8ee0fcf4788effdf75b6
  > Building yasnippet...
  > Cloning vimish-fold...
  - Checked out vimish-fold: a6501cbfe3db791f9ca17fd986c7202a87f3adb8
  > Building vimish-fold...
  > Cloning evil-vimish-fold...
  - Checked out evil-vimish-fold: b6e0e6b91b8cd047e80debef1a536d9d49eef31a
  > Building evil-vimish-fold...
  > Cloning auto-yasnippet...
  - Checked out auto-yasnippet: 6a9e406d0d7f9dfd6dff7647f358cb05a0b1637e
  > Building auto-yasnippet...
  > Cloning snippets (for doom-snippets)...
  > Building doom-snippets...
  > Cloning diredfl...
  - Checked out diredfl: f9140b2c42151dca669003d685c9f079b2e3dc37
  > Building diredfl...
  > Cloning dired-git-info...
  - Checked out dired-git-info: 9461476a28a5fec0784260f6e318237c662c3430
  > Building dired-git-info...
  > Cloning dired-rsync...
  - Checked out dired-rsync: 7940d9154d0a908693999b0e1ea351a6d365c93d
  > Building dired-rsync...
  > Cloning fd-dired...
  - Checked out fd-dired: 458464771bb220b6eb87ccfd4c985c436e57dc7e
  > Building fd-dired...
  > Cloning emacs-undo-fu...
  > Building undo-fu...
  > Cloning emacs-undo-fu-session...
  > Building undo-fu-session...
  > Cloning vundo...
  - Checked out vundo: 26c929229ae03b8d942907541f0844988b36d0ce
  > Building vundo...
  > Cloning browse-at-remote...
  - Checked out browse-at-remote: c020975a891438e278ad1855213d4f3d62c9fccb
  > Building browse-at-remote...
  > Cloning magit (for git-commit)...
  > Building git-commit...
  > Building git-commit > Cloning transient...
  > Building git-commit > Building transient...
  > Building git-commit > Cloning with-editor...
  > Building git-commit > Building with-editor...
  > Building git-commit...
  > Cloning git-timemachine...
  - Checked out git-timemachine: d8ffd0d7cc4ab3dd7de494c9ea36dfd99e2744fa
  > Building git-timemachine...
  > Cloning git-modes...
  - Checked out git-modes: f0a0154bf48dd1c0c587596cf4cfd3c90f673a05
  > Building git-modes...
  > Cloning flycheck-popup-tip...
  - Checked out flycheck-popup-tip: ef86aad907f27ca076859d8d9416f4f7727619c6
  > Building flycheck-popup-tip...
  > Building flycheck-popup-tip > Cloning popup-el (for popup)...
  > Building flycheck-popup-tip > Building popup...
  > Building flycheck-popup-tip...
  > Cloning quickrun...
  - Checked out quickrun: 7a89313c07a21eae9cd69a1a98e2a134d559e04f
  > Building quickrun...
  > Building quickrun > Cloning ht.el...
  > Building quickrun > Building ht...
  > Building quickrun...
  > Cloning eros...
  - Checked out eros: dd8910279226259e100dab798b073a52f9b4233a
  > Building eros...
  > Cloning dumb-jump...
  - Checked out dumb-jump: 0a783d1db610ff1dc4e1b7869589cff16ff92f7a
  > Building dumb-jump...
  > Cloning emacs-request...
  > Building request...
  - Checked out magit: 97a95f70079b6613bf98d2306279d3e03fe51234
  > Building magit...
  > Building magit > Building magit-section...
  > Building magit...
  > Cloning magit-todos...
  - Checked out magit-todos: c6f3fd03aa5b750636c2647253f21cc03329566c
  > Building magit-todos...
  > Building magit-todos > Cloning emacs-async...
  > Building magit-todos > Building async...
  > Building magit-todos...
  > Cloning highlight-quoted...
  - Checked out highlight-quoted: 24103478158cd19fbcfb4339a3f1fa1f054f1469
  > Building highlight-quoted...
  > Cloning macrostep...
  - Checked out macrostep: 75ecd041219239f0dceab4883594ea2fe366b484
  > Building macrostep...
  > Cloning overseer.el...
  > Building overseer...
  > Cloning elisp-def...
  - Checked out elisp-def: 1d2e88a232ec16bce036b49577c4d4d96035f9f7
  > Building elisp-def...
  > Cloning elisp-demos...
  - Checked out elisp-demos: 792be709c82101aea0585ece7429e2fdded74494
  > Building elisp-demos...
  > Cloning flycheck-package...
  - Checked out flycheck-package: 3a6aaed29ff61418c48c0251e1432c30748ae739
  > Building flycheck-package...
  > Building flycheck-package > Cloning package-lint...
  > Building flycheck-package > Building package-lint...
  > Building flycheck-package...
  > Cloning flycheck-cask...
  - Checked out flycheck-cask: 4b2ede6362ded4a45678dfbef1876faa42edbd58
  > Building flycheck-cask...
  > Cloning emacs-buttercup...
  > Building buttercup...
  > Cloning markdown-mode...
  - Checked out markdown-mode: c765b73b370f0fcaaa3cee28b2be69652e2d2c39
  > Building markdown-mode...
  > Cloning markdown-toc...
  - Checked out markdown-toc: 3d724e518a897343b5ede0b976d6fb46c46bcc01
  > Building markdown-toc...
  > Cloning edit-indirect...
  - Checked out edit-indirect: f80f63822ffae78de38dbe72cacaeb1aaa96c732
  > Building edit-indirect...
  > Cloning evil-markdown...
  - Checked out evil-markdown: 8e6cc68af83914b2fa9fd3a3b8472573dbcef477
  > Building evil-markdown...
  > Cloning org...
  - Checked out org: fe92a3cedba541482d5954eacb2b13e6f57a39c4
  > Building org...
  > Cloning org-contrib...
  - Checked out org-contrib: fff6c888065588527b1c1d7dd7e41c29ef767e17
  > Building org-contrib...
  > Cloning emacs-htmlize...
  > Building htmlize...
  > Cloning org-yt...
  - Checked out org-yt: 40cc1ac76d741055cbefa13860d9f070a7ade001
  > Building org-yt...
  > Cloning ox-clip...
  - Checked out ox-clip: ff117cf3c619eef12eccc0ccbfa3f11adb73ea68
  > Building ox-clip...
  > Cloning toc-org...
  - Checked out toc-org: bf2e4b358efbd860ecafe6e74776de0885d9d100
  > Building toc-org...
  > Cloning org-cliplink...
  - Checked out org-cliplink: 13e0940b65d22bec34e2de4bc8cba1412a7abfbc
  > Building org-cliplink...
  > Cloning evil-org-mode (for evil-org)...
  > Building evil-org...
  > Cloning orgit...
  - Checked out orgit: fc40397f7b36fa513d41f3119b7430cb236de9dd
  > Building orgit...
  > Cloning ob-async...
  - Checked out ob-async: 9aac486073f5c356ada20e716571be33a350a982
  > Building ob-async...
  > Cloning company-shell...
  - Checked out company-shell: 5f959a63a6e66eb0cbdac3168cad523a62cc2ccd
  > Building company-shell...
  > Cloning drag-stuff.el...
  > Building drag-stuff...
  > Cloning link-hint.el...
  > Building link-hint...
  ✓ Installed 133 packages
Regenerating autoloads files
> (Re)building profile in /home/ckie/git/nix-doom-emacs/v2/emacs/.local/etc/...
  > Deleting old init files...
  > Generating 4 init files...
  > Byte-compiling ~/git/nix-doom-emacs/v2/emacs/.local/etc/@init.28.el...
  ✓ Built init.28.elc
Deploying commit-msg and pre-push git hooks
    ✓ Created ~/git/nix-doom-emacs/v2/emacs/.git/hooks/commit-msg
    ✓ Created ~/git/nix-doom-emacs/v2/emacs/.git/hooks/pre-push
Download and install all-the-icon's fonts? (y or n) n
✓  Finished! Doom is ready to go!

But before you doom yourself, here are some things you should know:

1. Don't forget to run 'doom sync', then restart Emacs, after modifying init.el
   or packages.el in ~/.config/doom.

   This command ensures needed packages are installed, orphaned packages are
   removed, and your autoloads/cache files are up to date. When in doubt, run
   'doom sync'!

2. If something goes wrong, run `doom doctor`. It diagnoses common issues with
   your environment and setup, and may offer clues about what is wrong.

3. Use 'doom upgrade' to update Doom. Doing it any other way will require
   additional steps. Run 'doom help upgrade' to understand those extra steps.

4. Access Doom's documentation from within Emacs via 'SPC h d h' or 'C-h d h'
   (or 'M-x doom/help')

Have fun!

✓ Finished in 5m 17s
direnv: loading ~/git/nix-doom-emacs/v2/.envrc
direnv: export +AR +AS +CC +CONFIG_SHELL +CXX +DOOMDIR +HOST_PATH +IN_LORRI_SHELL +IN_NIX_SHELL +LD +NIX_BINTOOLS +NIX_BINTOOLS_WRAPPER_TARGET_HOST_x86_64_unknown_linux_gnu +NIX_BUILD_CORES +NIX_BUILD_TOP +NIX_CC +NIX_CC_WRAPPER_TARGET_HOST_x86_64_unknown_linux_gnu +NIX_CFLAGS_COMPILE +NIX_ENFORCE_NO_NATIVE +NIX_HARDENING_ENABLE +NIX_LDFLAGS +NIX_LOG_FD +NIX_STORE +NM +OBJCOPY +OBJDUMP +RANLIB +READELF +SIZE +SOURCE_DATE_EPOCH +STRINGS +STRIP +XDG_CONFIG_HOME +__structuredAttrs +allowSubstitutes +buildInputs +buildPhase +builder +cmakeFlags +configureFlags +depsBuildBuild +depsBuildBuildPropagated +depsBuildTarget +depsBuildTargetPropagated +depsHostHost +depsHostHostPropagated +depsTargetTarget +depsTargetTargetPropagated +doCheck +doInstallCheck +extraClosure +mesonFlags +name +nativeBuildInputs +origArgs +origBuilder +origExtraClosure +origOutputs +origPATH +origSystem +out +outputs +patches +phases +preHook +preferLocalBuild +propagatedBuildInputs +propagatedNativeBuildInputs +shell +shellHook +stdenv +strictDeps +system ~PATH ~XDG_DATA_DIRS
ckie@cookiemonster ~/git/nix-doom-emacs/v2 ->
```
